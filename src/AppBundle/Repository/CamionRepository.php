<?php

namespace AppBundle\Repository;

/**
 * CamionRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CamionRepository extends \Doctrine\ORM\EntityRepository
{
    public function buscarCamionesDeLaEmpresa($idEmpresa){

            return $this->getEntityManager()
            ->createQuery(' SELECT c
                            FROM AppBundle:Camion c
                            LEFT JOIN c.operador o
                            LEFT JOIN o.usuario u
                            WHERE u.empresa = :idEmpresa
                            AND c.camVisible = :visible')
            ->setParameter('idEmpresa', $idEmpresa)->setParameter('visible', 1)
            ->getResult();
    }
}
