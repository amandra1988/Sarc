<?php

namespace AppBundle\Repository;

/**
 * RutaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class RutaRepository extends \Doctrine\ORM\EntityRepository
{
	
	public function buscarSoloRutasDeHoy($idEmpresa,$fecha){
		
		return $this->getEntityManager()
		->createQuery('
						SELECT r
						FROM AppBundle:Ruta r
						LEFT JOIN r.cliente c
						WHERE c.empresa = :idEmpresa
						AND r.rtaFecha  >= :fecha
					')
		->setParameter('idEmpresa', $idEmpresa)
		->setParameter('fecha', $fecha)
		->getResult();
	}
}
